<html>
    <head>
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        
        <link rel="stylesheet" type="text/css" href="css/index.css">

        <link rel="stylesheet" href="./lib/onsenui/css/onsenui.css">
        <link rel="stylesheet" href="./lib/onsenui/css/onsen-css-components.min.css">
        <link rel="stylesheet" type="text/css" href="onsen-css-theme/onsen-css-components.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" />
        <script src="./lib/onsenui/js/onsenui.min.js"></script>

        <link rel="stylesheet" type="text/css" href="css/common.css">        
    </head>
    <body>

        <ons-navigator swipeable id="myNavigator" page="signup.html"></ons-navigator>

        <!-- Sign Up Process -->
        <template id="signup.html">
            <ons-page id="signup-temp">
                <!-- <ons-toolbar>  
                    <div class="center">Log In</div>  
                </ons-toolbar>   -->
                <!-- Information fields -->
                <div style="text-align: center; margin-top:5em">  
                    <img src="img/wages-logo.png" alt="Wages Logo" style="width: 50%">
                    <img src="img/revenue.png" alt="Wages Illustration" style="width: 100%">
                    <p>  
                        <ons-input id="username" modifier="underbar" placeholder="Username" float></ons-input>  
                    </p>  
                    <p>  
                        <ons-input id="password" modifier="underbar" type="password" placeholder="Password" float></ons-input>  
                    </p>
                    <!-- <p>  
                        <ons-input id="passwordConfirm" modifier="underbar" type="password" placeholder="Confirm Password" float></ons-input>  
                    </p>   -->

                    <div style="margin-top: 30px;"><ons-icon icon="ion-logo-google" size="32px, material:24px"></ons-icon> &nbsp;
                    <ons-icon icon="ion-logo-facebook" size="32px, material:24px"></ons-icon> &nbsp;
                    <ons-icon icon="ion-logo-linkedin" size="32px, material:24px"></ons-icon> 
                    </div>

                    <p style="margin-top: 30px;">  
                        <ons-button onclick="logIn()">Log In</ons-button>  
                    </p>
                    
                    <p style="margin-top: 30px;"> Don't have an account? 
                        <span onclick="createAccount_1()" style="text-decoration: underline;">Sign-Up</span>
                    </p>

                </div>  
          </ons-page>
        </template>

        <!-- create account page 1 -->
        <template id="createAccount_1.html">
            <ons-page id="createAccount-temp">
                <br /><br />
                <ons-toolbar>
                    <div class="center">Personal Information</div>
                </ons-toolbar>

                <!-- input fields -->
                <div class="center">
                    <ons-card>
                        <ons-list-header>Name</ons-list-header>
                        <ons-list-header>
                            <ons-row>
                                <ons-col>
                                    <ons-input placeholder="First"></ons-input>
                                </ons-col>
                                <ons-col>
                                    <ons-input placeholder="Last"></ons-input>
                                </ons-col>
                        </ons-row>
                        </ons-list-header>
                    </ons-card>

                <!-- second row - gender -->
                <ons-card>
                    <ons-list-header>Gender</ons-list-header>
                    <ons-list>
                        <ons-list-item tappable>
                            <label class="left">
                                <ons-radio name="color" input-id="radio-1" checked></ons-radio>
                            </label>
                            <label for="radio-1" class="center">
                                Female
                            </label>
                        </ons-list-item>
                        <ons-list-item tappable>
                            <label class="left">
                                <ons-radio name="color" input-id="radio-2"></ons-radio>
                            </label>
                            <label for="radio-2" class="center">
                                Male
                            </label>
                        </ons-list-item>
                        <ons-list-item tappable>
                            <label class="left">
                                <ons-radio name="color" input-id="radio-2"></ons-radio>
                            </label>
                            <label for="radio-2" class="center">
                                Prefer not to say
                            </label>
                        </ons-list-item>
                    </ons-list>
                </ons-card>

                <!-- third row - location -->
                <ons-card>
                    <ons-list-header>Location</ons-list-header>
                    <ons-input></ons-input>
                </ons-card>

                <!-- fourth row - student/working radio -->
                <ons-card>
                    <ons-row>
                        <ons-col>
                            <ons-radio> Student</ons-radio>
                        </ons-col>
                        <ons-col>
                            <ons-radio>Working</ons-radio>
                        </ons-col>
                    </ons-row>
                </ons-card>

                <!-- fifth row - next button -->
                <ons-row>
                    <ons-col>
                        <ons-button class="button--large--cta" onclick="createAccount_2()" style="margin-top:30px">Next</ons-button>
                    </ons-col>
                </ons-row>
                </div>
            </ons-page>
        </template>
        <!-- End of create account page 1 -->

        <!-- create account page 2 -->
        <template id="createAccount_2.html">
            <ons-page id="createAccount-temp">
                <br /><br />
                <ons-toolbar>
                    <div class="center">Sign up</div>
                </ons-toolbar>

                <!-- input fields -->
                <div class="center">
                    <!-- first row - job title -->
                    <ons-card>
                        <ons-list-header>Job Title</ons-list-header>
                        <ons-input></ons-input>
                    </ons-card>

                    <!-- second row - years of experience -->
                    <ons-card>
                        <ons-list-header>Years of Experience</ons-list-header>
                        <ons-list>
                            <ons-list-item tappable>
                                <label class="left">
                                    <ons-radio name="color" input-id="radio-1" checked></ons-radio>
                                </label>
                                <label for="radio-1" class="center">
                                    1-3
                                </label>
                            </ons-list-item>
                            <ons-list-item tappable>
                                <label class="left">
                                    <ons-radio name="color" input-id="radio-2"></ons-radio>
                                </label>
                                <label for="radio-2" class="center">
                                    4-6
                                </label>
                            </ons-list-item>
                            <ons-list-item tappable>
                                <label class="left">
                                    <ons-radio name="color" input-id="radio-2"></ons-radio>
                                </label>
                                <label for="radio-2" class="center">
                                    6-8
                                </label>
                            </ons-list-item>
                            <ons-list-item tappable>
                                <label class="left">
                                    <ons-radio name="color" input-id="radio-2"></ons-radio>
                                </label>
                                <label for="radio-2" class="center">
                                    8+
                                </label>
                            </ons-list-item>
                        </ons-list>
                    </ons-card>

                    <!-- third row - company type -->
                    <ons-card>
                        <ons-list-header>Company Type</ons-list-header>
                        <ons-input></ons-input>
                    </ons-card>

                    <!-- fourth row - salary -->
                    <ons-card>
                        <ons-list-header>Salary</ons-list-header>
                        <ons-input></ons-input>
                    </ons-card>

                    <!-- fifth row - next button -->
                    <ons-row>
                        <ons-col>
                            <ons-button class="button--large--cta" onclick="createAccount_done()" style="margin-top:30px">Done</ons-button>
                        </ons-col>
                    </ons-row>

                </div>
            </ons-page>
        </template>
        <!-- End of create account page 2 -->


        <!-- Home Page -->
        <template id="home.html">
            <ons-page id="home-temp">
                <ons-toolbar>
                    <div class="center">Home</div>
                    <div class="right"><ons-button onclick="logOut()" style="padding-top: 10px;padding-right: 10px;">Log Out</ons-button></div>
                </ons-toolbar>
                <ons-list-header>Wine List</ons-list-header>
                
                <!-- Display wine list dynamically -->
                <ons-list>
                    <ons-lazy-repeat id="dynamic-list"></ons-lazy-repeat>
                </ons-list>                      
            </ons-page>
        </template>

        <!-- Single Product Page -->
        <template id="single.html">
            <ons-page id="single-temp">
                <ons-toolbar>
                    <!-- Button to pop page back to home -->
                    <div class="left"><ons-back-button>Back</ons-back-button></div>
                    <div class="center"></div>
                </ons-toolbar>

                <!-- Display wine information -->
                <ons-card>
                    <div><img style="max-width: 100%;" id="singleImg"></div>
                    <div class="title" id="singleTitle" ></div>
                    <div class="content" id="singleContent" ></div>
                </ons-card>
            </ons-page>
        </template>
        
    </body>

    <script src="./js/index.js"></script>
    <script src="./js/wine-list.js"></script>

    <script>
        var logIn = function() {
            myNavigator.resetToPage('home.html')
        };

        var logOut = function() {
            myNavigator.resetToPage('signup.html')
        };

        var createAccount_1 = function(){
            myNavigator.pushPage('createAccount_1.html')
        };

        var createAccount_2 = function(){
            myNavigator.pushPage('createAccount_2.html')
        };

        var createAccount_done = function (){
            myNavigator.resetToPage('home.html')
        };


        // Sign up function
        var signup = function() {  
            var user = document.getElementById('username').value;  
            var pw = document.getElementById('password').value;  
            var pwConfirm = document.getElementById('passwordConfirm').value;

            // If passwords don't match
            if (pw !== pwConfirm) {  
                ons.notification.alert('Please make sure both passwords match');  
            // If both password fields are empty
            } else if (pw == 0 || pwConfirm == 0) {  
                ons.notification.alert('Please enter a password'); 

            // If user field is empty
            } else if (user == 0) {  
                ons.notification.alert('Please enter a username'); 

            // If passwords match 
            }  else {
                ons.notification.alert('Congratulations! You have successfully signed up.');  
                
                // Redirect to home page
                myNavigator.resetToPage('home.html')
            }
        };  

        // any even managers or other funcationality that should wait intil the page init has completed
            document.addEventListener('init', function(event) {            
                var page = event.target;           

                 // load list of wines on home page
                 if(page.id === 'home-temp'){

                    loadWineList(page);
                } 

                // load selected wine page
                if(page.id === 'single-temp'){
                    page.querySelector('ons-toolbar .center').innerHTML = page.data.cWine.title;

                    page.querySelector('#singleImg').src = page.data.cWine.path;
                    page.querySelector('#singleTitle').innerHTML = page.data.cWine.title;
                    page.querySelector('#singleContent').innerHTML = page.data.cWine.desc;
                }             
            }); 
    
            // Function to dynamically display wine list
            function loadWineList(page) {
                // select the list element 
                var dynList = page.querySelector('#dynamic-list');

                // Add list items in the DOM 
                for(let i = 0; i < wineList.length; i++) {
                dynList.appendChild(
                    ons.createElement(
                        '<ons-list-item>' + 
                            '<div class="left"><img class="list-item__thumbnail" src="' + wineList[i].path + '"></div>' + 
                            '<div class="center"><span class="list-item__title">' + wineList[i].title + '</span><span class="list-item__subtitle">' + wineList[i].desc + '</span></div>' + 
                            // Button to push page into single view
                            '<div class="right"><ons-button onclick="pushSingleView(' + i +')" icon="md-caret-right"></ons-button></div>' +
                            '</ons-list-item>'
                        )
                    );
                }
            }


            // push single page onto stack
            function pushSingleView(fIndex){
                // get the current wine from the wineList data 
                var currWine = wineList[Number.parseInt(fIndex)];

                // push the single page view on the stack 
                document.querySelector('#myNavigator').pushPage('single.html', {data: {cWine: currWine}});

            }
    </script>
</html>
